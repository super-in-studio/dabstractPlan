<attachment contenteditable="false" data-atts="%5B%5D" data-aid=".atts-9b11c738-eb8a-41db-bc04-5d53f6f7bf43"></attachment><h1><strong style="color: rgb(73, 73, 73);">过期删除策略</strong></h1><p>删除达到过期时间的 Key。</p><h4><strong>①定时删除</strong></h4><p>&nbsp;</p><p>对于每一个设置了过期时间的 Key 都会创建一个定时器，一旦到达过期时间就立即删除。</p><p>&nbsp;</p><p>该策略可以立即清除过期的数据，对内存较友好，但是缺点是占用了大量的 CPU 资源去处理过期的数据，会影响 Redis 的吞吐量和响应时间。</p><h4><strong>②惰性删除</strong></h4><p>当访问一个 Key 时，才判断该 Key 是否过期，过期则删除。该策略能最大限度地节省 CPU 资源，但是对内存却十分不友好。</p><p>&nbsp;</p><p>有一种极端的情况是可能出现大量的过期 Key 没有被再次访问，因此不会被清除，导致占用了大量的内存。</p><p>在计算机科学中，懒惰删除（英文：lazy deletion）指的是从一个散列表（也称哈希表）中删除元素的一种方法。</p><p>&nbsp;</p><p>在这个方法中，删除仅仅是指标记一个元素被删除，而不是整个清除它。被删除的位点在插入时被当作空元素，在搜索之时被当作已占据。</p><p>&nbsp;</p><h4><strong>③定期删除</strong></h4><p>&nbsp;</p><p>每隔一段时间，扫描 Redis 中过期 Key 字典，并清除部分过期的 Key。该策略是前两者的一个折中方案，还可以通过调整定时扫描的时间间隔和每次扫描的限定耗时，在不同情况下使得 CPU 和内存资源达到最优的平衡效果。</p><p>&nbsp;</p><p>在 Redis 中，同时使用了定期删除和惰性删除。</p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p>