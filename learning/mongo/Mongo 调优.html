<attachment contenteditable="false" data-atts="%5B%5D" data-aid=".atts-92c68ad3-1d78-46d1-aced-e7a0644f5a0b"></attachment><p>https://www.cnblogs.com/unclecc/p/11262775.html</p><p><br></p><h2>MongoDB的查询优化器</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;MongoDB的查询优化器与其他数据库的稍微不同。基本来说，如果一个索引能够精确匹配一个查询，那么查询优化器就会使用这个索引，如果不能精确匹配，可能会有几个索引都适合你的查询。那MongoDB是怎样选择的呢？答：MongoDB的查询计划会将多个索引并行的去执行，最早返回100个结果的就是胜者，其他查询计划都会被终止。</p><p>&nbsp;&nbsp;&nbsp;这个查询计划会被缓冲，接下来的这个查询都会使用他，下面几种情况会重新计划；</p><ol><li class="ql-indent-1">最初的计划评估之后集合发生了比较大的数据波动，查询优化器就会重新挑选可行的查询计划。</li><li class="ql-indent-1">建立索引时。</li><li class="ql-indent-1">每执行1000次查询之后，查询优化器就会重新评估查询计划</li></ol><p><br></p>