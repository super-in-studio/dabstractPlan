<attachment contenteditable="false" data-atts="%5B%5D" data-aid=".atts-501fa47e-6a5a-42ad-ae9b-4e388565ea8b"></attachment><p>1,</p><p><br></p><p>&nbsp;TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronizationAdapter() {</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Override</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public void afterCommit() {</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 发送转账超时消息</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BizTransferApplyTimeoutMsgReq bizTransferApplyTimeoutMsgReq = new BizTransferApplyTimeoutMsgReq();</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bizTransferApplyTimeoutMsgReq.setTransferId(bizTransferApply.getId());</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mqProducer.sendDelayedMessage(MqConstants.TRANSFER_DELAYED_EXCHANGE, MqConstants.TRANSFER_DELAYED_KEY, EnumMqMessageFailRecordType.TRANSFER, bizTransferApplyTimeoutMsgReq, Constants.TRANSFER_TIMEOUT_24_HOURS);</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</p><p>&nbsp;&nbsp;&nbsp;&nbsp;});</p><p><br></p>