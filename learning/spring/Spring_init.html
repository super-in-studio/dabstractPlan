<attachment contenteditable="false" data-atts="%5B%5D" data-aid=".atts-df82c5dd-0e5a-4637-bea0-d14cf523884b"></attachment><p>1,org.springframework.boot.SpringApplication.run(Class&lt;?&gt;[], String[])</p><p>新建SpringApplication</p><p>2,org.springframework.boot.SpringApplication.run(String...)</p><p>(1)org.springframework.util.StopWatch 记录启动时间</p><p>(2)org.springframework.boot.SpringApplicationRunListeners </p><p>  spring 默认启动监听器  </p><p>（3）获取启动命令后面参数</p><p>（4）获取环境变量可配置值：</p><p>StandardServletEnvironment {activeProfiles=[], defaultProfiles=[default], propertySources=[ConfigurationPropertySourcesPropertySource {name='configurationProperties'}, StubPropertySource {name='servletConfigInitParams'}, StubPropertySource {name='servletContextInitParams'}, MapPropertySource {name='systemProperties'}, OriginAwareSystemEnvironmentPropertySource {name='systemEnvironment'}, RandomValuePropertySource {name='random'}, ExtendedDefaultPropertySource {name='defaultProperties'}, MapPropertySource {name='springCloudClientHostInfo'}]}</p><p>（5）选择容器类型</p><p>org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext:依赖中有 javax.servlet.Servlet ， org.springframework.web.context.ConfigurableWebApplicationContext</p><p><br></p><p>org.springframework.boot.web.reactive.context.AnnotationConfigReactiveWebServerApplicationContext：</p><p><br></p><p>默认：org.springframework.context.annotation.AnnotationConfigApplicationContext</p><p>（6）org.springframework.boot.SpringBootExceptionReporter ：初始化异常报告</p><p>（7）org.springframework.boot.SpringApplication.prepareContext(ConfigurableApplicationContext, ConfigurableEnvironment, SpringApplicationRunListeners, ApplicationArguments, Banner) ：准备环境</p><p> a. 设置环境StandardServletEnvironment 进容器</p><p> b.org.springframework.boot.SpringApplication.postProcessApplicationContext(ConfigurableApplicationContext) :用于容器初始化拓展</p><p>c.org.springframework.boot.SpringApplication.applyInitializers(ConfigurableApplicationContext) : 各种子容器初始化，数据如下</p><p>[org.springframework.boot.context.config.DelegatingApplicationContextInitializer@fd07cbb, org.springframework.boot.context.ContextIdApplicationContextInitializer@3571b748, org.springframework.boot.context.ConfigurationWarningsApplicationContextInitializer@3e96bacf, org.springframework.boot.web.context.ServerPortInfoApplicationContextInitializer@484970b0, org.springframework.boot.autoconfigure.SharedMetadataReaderFactoryContextInitializer@4470f8a6, org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLoggingListener@7c83dc97, org.springframework.cloud.bootstrap.BootstrapApplicationListener$AncestorInitializer@182e7eda, org.springframework.cloud.bootstrap.config.PropertySourceBootstrapConfiguration$$EnhancerBySpringCGLIB$$1041ee3b@5f61371d, org.springframework.cloud.bootstrap.encrypt.EnvironmentDecryptApplicationInitializer@420a8042, org.springframework.cloud.bootstrap.BootstrapApplicationListener$DelegatingEnvironmentDecryptApplicationInitializer@79b18230, org.springframework.cloud.bootstrap.config.PropertySourceBootstrapConfiguration$$EnhancerBySpringCGLIB$$1041ee3b@5146ae5e, org.springframework.cloud.bootstrap.encrypt.EnvironmentDecryptApplicationInitializer@642270ad, org.springframework.cloud.bootstrap.BootstrapApplicationListener$DelegatingEnvironmentDecryptApplicationInitializer@3426d8e2]</p><p><br></p><p>d.启动监听器拓展</p><p>e.初始化beanFactory:将环境参数加入beanFactory</p><p>f. <strong>设置扫描路径</strong></p><p><br></p><p>(8) org.springframework.boot.SpringApplication.refreshContext(ConfigurableApplicationContext) : 刷新容器数据，真正开始初始化容器</p><p><br></p>