<attachment contenteditable="false" data-atts="%5B%5D" data-aid=".atts-f6968cca-9017-4613-af0b-f7d57d4edd28"></attachment><p><br></p><p>public class MapCache&lt;K, V&gt; implements Cache&lt;K, V&gt; {</p><p><br></p><p>&nbsp;</p><p>&nbsp;&nbsp;private final Map&lt;K, V&gt; map;</p><p><br></p><p>&nbsp;&nbsp;</p><p>&nbsp;&nbsp;private final String name;</p><p><br></p><p>&nbsp;&nbsp;public MapCache(String name, Map&lt;K, V&gt; backingMap) {</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if (name == null) {</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw new IllegalArgumentException("Cache name cannot be null.");</p><p>&nbsp;&nbsp;&nbsp;&nbsp;}</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if (backingMap == null) {</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw new IllegalArgumentException("Backing map cannot be null.");</p><p>&nbsp;&nbsp;&nbsp;&nbsp;}</p><p>&nbsp;&nbsp;&nbsp;&nbsp;this.name = name;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;this.map = backingMap;</p><p>&nbsp;&nbsp;}</p><p><br></p><p>&nbsp;&nbsp;public V get(K key) throws CacheException {</p><p>&nbsp;&nbsp;&nbsp;&nbsp;return map.get(key);</p><p>&nbsp;&nbsp;}</p><p><br></p><p>&nbsp;&nbsp;public V put(K key, V value) throws CacheException {</p><p>&nbsp;&nbsp;&nbsp;&nbsp;return map.put(key, value);</p><p>&nbsp;&nbsp;}</p><p><br></p><p>&nbsp;&nbsp;public V remove(K key) throws CacheException {</p><p>&nbsp;&nbsp;&nbsp;&nbsp;return map.remove(key);</p><p>&nbsp;&nbsp;}</p><p><br></p><p>&nbsp;&nbsp;public void clear() throws CacheException {</p><p>&nbsp;&nbsp;&nbsp;&nbsp;map.clear();</p><p>&nbsp;&nbsp;}</p><p><br></p><p>&nbsp;&nbsp;public int size() {</p><p>&nbsp;&nbsp;&nbsp;&nbsp;return map.size();</p><p>&nbsp;&nbsp;}</p><p><br></p><p>&nbsp;&nbsp;public Set&lt;K&gt; keys() {</p><p>&nbsp;&nbsp;&nbsp;&nbsp;Set&lt;K&gt; keys = map.keySet();</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if (!keys.isEmpty()) {</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return Collections.unmodifiableSet(keys);</p><p>&nbsp;&nbsp;&nbsp;&nbsp;}</p><p>&nbsp;&nbsp;&nbsp;&nbsp;return Collections.emptySet();</p><p>&nbsp;&nbsp;}</p><p><br></p><p>&nbsp;&nbsp;public Collection&lt;V&gt; values() {</p><p>&nbsp;&nbsp;&nbsp;&nbsp;Collection&lt;V&gt; values = map.values();</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if (!CollectionUtils.isEmpty(values)) {</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return Collections.unmodifiableCollection(values);</p><p>&nbsp;&nbsp;&nbsp;&nbsp;}</p><p>&nbsp;&nbsp;&nbsp;&nbsp;return Collections.emptySet();</p><p>&nbsp;&nbsp;}</p><p><br></p><p>&nbsp;&nbsp;public String toString() {</p><p>&nbsp;&nbsp;&nbsp;&nbsp;return new StringBuilder("MapCache '")</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.append(name).append("' (")</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.append(map.size())</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.append(" entries)")</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.toString();</p><p>&nbsp;&nbsp;}</p><p>}</p><p><br></p>